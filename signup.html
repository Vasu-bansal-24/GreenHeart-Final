<!doctype html>
<html class="no-js" lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>GreenHeart</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

		<link rel="shortcut icon" type="image/x-icon" href="img/favicon.png">
        <!-- Place favicon.ico in the root directory -->

        <!-- Add these scripts in the <head> -->
        <script src="https://www.gstatic.com/firebasejs/9.0.2/firebase-app-compat.js"></script>
        <script src="https://www.gstatic.com/firebasejs/9.0.2/firebase-auth-compat.js"></script>
        <script src="https://www.gstatic.com/firebasejs/9.0.2/firebase-firestore-compat.js"></script>

        <!-- Your Firebase config -->
        <script>
        const firebaseConfig = {
            apiKey: "AIzaSyArUEs5b1UGm1A1pjfIuzosU3tx3oCYqME",
            authDomain: "user-auth-2e7ac.firebaseapp.com",
            projectId: "user-auth-2e7ac",
            storageBucket: "user-auth-2e7ac.firebasestorage.app",
            messagingSenderId: "1011471974269",
            appId: "1:1011471974269:web:cc0704d9c7393af9465614",
            measurementId: "G-JVR9S1YEWK"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();
        </script>

		<!-- CSS here -->
        <link rel="stylesheet" href="css/bootstrap.min.css">
        <link rel="stylesheet" href="css/animate.min.css">
        <link rel="stylesheet" href="css/magnific-popup.css">
        <link rel="stylesheet" href="css/fontawesome-all.min.css">
        <link rel="stylesheet" href="css/owl.carousel.min.css">
        <link rel="stylesheet" href="css/odometer.css">
        <link rel="stylesheet" href="css/jquery-ui.css">
        <link rel="stylesheet" href="css/flaticon.css">
        <link rel="stylesheet" href="css/aos.css">
        <link rel="stylesheet" href="css/slick.css">
        <link rel="stylesheet" href="css/default.css">
        <link rel="stylesheet" href="css/style.css">
        <link rel="stylesheet" href="css/responsive.css">
    </head>
<body>
    <!-- preloader -->
    <div id="preloader">
        <div id="loading-center">
            <div id="loading-center-absolute">
                <div class="object" id="object_one"></div>
                <div class="object" id="object_two"></div>
                <div class="object" id="object_three"></div>
            </div>
        </div>
    </div>
    <!-- preloader-end -->

    <!-- Scroll-top -->
    <button class="scroll-top scroll-to-target" data-target="html">
        <i class="fas fa-angle-up"></i>
    </button>
    <!-- Scroll-top-end-->

    <main>
        <section class="contact-area pt-120 pb-120" style="background: linear-gradient(rgba(255,255,255,0.9), rgba(255,255,255,0.9)), url('img/bg/farm_bg.jpg') center/cover;">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-xl-6 col-lg-8">
                        <div class="section-title text-center mb-50">
                            <span class="sub-title" style="color: #4CAF50; font-size: 1.2em;">Welcome to GreenHeart</span>
                            <h2 class="title" style="color: #2e5a1c; margin: 15px 0;">Create Your Account</h2>
                            <p style="font-size: 1.1em;">Join our thriving agricultural community and be part of the sustainable farming revolution</p>
                        </div>
                    </div>
                </div>
                <div class="row justify-content-center">
                    <div class="col-xl-6 col-lg-8">
                        <div class="contact-form" style="background: white; padding: 40px; border-radius: 15px; box-shadow: 0 0 20px rgba(0,0,0,0.1);">
                            <form id="signup-form" action="#" method="POST">
                                <div class="form-group">
                                    <label for="signup-name" style="color: #2e5a1c; margin-bottom: 8px;">Full Name</label>
                                    <input type="text" id="signup-name" placeholder="Enter your full name" required style="border: 2px solid #e0e0e0; border-radius: 8px; padding: 12px;">
                                </div>
                                <div class="form-group">
                                    <label for="signup-email" style="color: #2e5a1c; margin-bottom: 8px;">Email Address</label>
                                    <input type="email" id="signup-email" placeholder="Enter your email address" required style="border: 2px solid #e0e0e0; border-radius: 8px; padding: 12px;">
                                </div>
                                <div class="form-group">
                                    <label for="signup-password" style="color: #2e5a1c; margin-bottom: 8px;">Password</label>
                                    <input type="password" id="signup-password" placeholder="Create a strong password" required style="border: 2px solid #e0e0e0; border-radius: 8px; padding: 12px;">
                                </div>
                                <div class="form-group">
                                    <label for="confirm-password" style="color: #2e5a1c; margin-bottom: 8px;">Confirm Password</label>
                                    <input type="password" id="confirm-password" placeholder="Confirm your password" required style="border: 2px solid #e0e0e0; border-radius: 8px; padding: 12px;">
                                </div>
                                <div class="form-group">
                                    <label for="role" style="color: #2e5a1c; margin-bottom: 8px;">Select Your Role</label>
                                    <select id="role" required style="border: 2px solid #e0e0e0; border-radius: 8px; padding: 12px; width: 100%;">
                                        <option value="" disabled selected>Choose your role in GreenHeart</option>
                                        <option value="farmer">Farmer - Grow & Sell Products</option>
                                        <option value="buyer">Buyer - Purchase Fresh Produce</option>
                                    </select>
                                </div>
                                <div class="form-group text-center mb-4">
                                    <button type="submit" class="btn" style="background: #4CAF50; color: white; padding: 12px 40px; border-radius: 25px; font-size: 1.1em; transition: all 0.3s ease;">
                                        <i class="fas fa-user-plus mr-2"></i> Create Account
                                    </button>
                                </div>
                                <div class="form-group text-center">
                                    <p style="color: #666;">Already have an account? <a href="login.html" style="color: #4CAF50; text-decoration: none; font-weight: bold;">Login here</a></p>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <script>
        document.getElementById('signup-form').addEventListener('submit', (e) => {
            e.preventDefault();
            
            const email = document.getElementById('signup-email').value;
            const password = document.getElementById('signup-password').value;
            const confirmPassword = document.getElementById('confirm-password').value;
            const name = document.getElementById('signup-name').value;
            const role = document.getElementById('role').value;

            // Validate passwords match
            if(password !== confirmPassword) {
                alert('Passwords do not match!');
                return;
            }

            // Validate password length
            if(password.length < 6) {
                alert('Password should be at least 6 characters long');
                return;
            }

            // Validate role selection
            if(!role) {
                alert('Please select a role');
                return;
            }
        
            auth.createUserWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    // Add user to Firestore with role
                    return db.collection('users').doc(userCredential.user.uid).set({
                        name: name,
                        email: email,
                        role: role,
                        createdAt: firebase.firestore.FieldValue.serverTimestamp()
                    });
                })
                .then(() => {
                    alert('Signup successful!');
                    window.location.href = '/dashboard.html'; // Redirect
                })
                .catch((error) => {
                    console.error(error);
                    alert('Error: ' + error.message);
                });
        });
    </script>

    <!-- JS here -->
    <script src="js/vendor/jquery-3.5.0.min.js"></script>
    <script src="js/popper.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/isotope.pkgd.min.js"></script>
    <script src="js/imagesloaded.pkgd.min.js"></script>
    <script src="js/jquery.magnific-popup.min.js"></script>
    <script src="js/jquery.countdown.min.js"></script>
    <script src="js/jquery.odometer.min.js"></script>
    <script src="js/jquery.appear.js"></script>
    <script src="js/slick.min.js"></script>
    <script src="js/ajax-form.js"></script>
    <script src="js/wow.min.js"></script>
    <script src="js/aos.js"></script>
    <script src="js/plugins.js"></script>
    <script src="js/main.js"></script>
</body>
</html>
